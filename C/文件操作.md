# 文件操作

## 概述

- FILE所有平台的名字都一样，FILE是一个结构体类型，里面的成员功能一样，不同平台成员的名字不一样
- FILE *fp
- fp指针，只要调用了fopen()，在堆区分配空间，把地址返回给fp
- fp指针不是指向文件，fp指针和文件关联，fp内部成员保存了文件的状态
- 操作fp指针，不能直接操作，必须通过文件库函数来操作fp指针
- 通过库函数操作fp指针，对文件的任何操作，fp内部成员会有相应的变化(系统自动完成)

1. 打开文件fopen()

2. 读写文件

   

   - 按字符读写fgetc(),fputc()
   - 按字符串(行)读取文件fgets(),fputs()
   - 文件结尾判断feof()

3. 关闭文件fclose()

## 标准文件指针

```c
#include <stdio.h>

int main(){ 
	printf("aaaaaaaaaa\n");
	//关闭标准输出文件指针
	fclose(stdout);
	printf("bbbbbbbbbb\n");
	//打印库函数调用失败的原因
	perror("mike");//mike:Bad file descriptor
	//关闭错误输出文件指针
	fclose(stderr);
	perror("lucy");
	//关闭标准输入文件指针
	fclose(stdin);
	return 0;
}
```

```c
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(){ 
	//printf函数的内部实现，往标准输出设备(1)写内容
	printf("aaaaaaaaaa\n");
	close(1);//1代表标准输出设备，关闭了，1就是空闲的数字
	int fd = open("./01.txt",O_WRONLY,0777);
	//printf函数的内部实现，往(1)写内容，但是1现在和01.txt关联，所以printf的内容写到01.txt
	printf("fd = %d\n",fd);
	printf("bbbbb\n");
	return 0;
}

```

## 打开文件

```c

```

